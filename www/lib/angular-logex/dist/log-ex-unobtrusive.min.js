/**
 * Log Unobtrusive Extension v0.0.10
 *
 * Used within AngularJS to enhance functionality within the AngularJS $log service.
 *
 * @original-author  Thomas Burleson
 * @contributor Layton Whiteley
 * @contributor A confused individual <ferronrsmith@gmail.com>
 * @website http://www.theSolutionOptimist.com
 * (c) 2015 https://github.com/lwhiteley/AngularLogExtender
 * License: MIT
 *
 * Modifications made by @contributor Layton Whiteley:
 * - Modified to be a full stand-alone Angular Application for reuse
 * - Has global and feature level activation/disabling for $log
 * - Supported sensitive field filtering
 * - Created and tested with AngularJS versions : 1.0.4, 1.1.0, 1.1.2, 1.2.28, 1.3.14, 1.4.0-rc.0
 */
angular.module("log.ex.uo",[]).provider("logEx",["$provide",function(n){var r=angular.injector(["ng"]),t=r.get("$filter"),e=!1,o=!1,i=!1,u=!1,a=null,l=navigator.userAgent,g=["log","info","warn","debug","error","getInstance"],c=["chrome","firefox"],f=!0,s=["color","background","font-size","border"],h="[FILTERED]",d={filterString:h,logFilters:[]},L={log:"color: green;",info:"color: blue",warn:"color: #CC9933;",debug:"color: brown;",error:"color: red;"},v=g,p=function(n){var r=" >> ",e="MMM-dd-yyyy-h:mm:ssa",o=t("date")(new Date,e);return""+o+("string"!==b(n)?"":"::"+n)+r},b=function(n){return Object.prototype.toString.call(n).replace(/(\[|object|\s|\])/g,"").toLowerCase()},E=function(n){return/(object|array)/.test(b(n))},y=function(n){return"string"===b(n)?n.replace(/^\s*/,"").replace(/\s*$/,""):""},x=function(n){return"boolean"===b(n)},F=function(n){return"string"===b(n)&&""!==y(n)},D=function(n,r){return"string"===b(n)&&"string"===b(r)&&-1!==r.toLowerCase().indexOf(n.toLowerCase())?!0:!1},C=function(n){var r="";return r=!u&&i?a(n):p(n)},O=function(){for(var n=0;c.length>n;n++)if(D(c[n],l))return!0;return!1},G=O(),I=function(n){return 1===n.length&&"string"===b(n[0])},w=function(n){for(var r=0;s.length>r;r++)if(D(s[r],n))return!0;return!1},j=function(n){return"string"===b(n)&&D(":",n)&&y(n).length>6&&w(n)},A=function(n,r,t){t="string"===b(t)?t:"";var e=G&&j(r)&&"string"===b(n),o=e?""+t+n:n;return e?["%c"+o,r]:[o]},M=function(n,r){return x(n)&&n&&2===r.length},S=function(n,r,t){var e="string"!==b(n)&&"object"!==b(r),o="string"!==b(n)||"object"!==b(r);return e||o?Array.prototype.slice.call(arguments):(t="regexp"===b(t)?t:/\{([^\{\}]*)\}/g,n.replace(t,function(n,t){var e=t.split("."),o=r;try{angular.forEach(e,function(n,r){o=o[e[r]]})}catch(i){o=n}return"string"===b(o)||"number"===b(o)?o:n}))},m=function(n){return E(n)&&d.logFilters.length>0?(angular.forEach(n,function(r,t){angular.forEach(d.logFilters,function(e){"object"===b(r)&&r.hasOwnProperty(e)&&!E(r[e])?r[e]=d.filterString:E(r)&&(n[t]=m(r))})}),n):n};n.decorator("$log",["$delegate",function(n){var r=function(){var n=function(n){return x(n)},r=function(n){return n!==!1},t=function(n,r){return x(n)&&x(r)?r:!1},e=function(n,r,t,e,o){var i=F(e)?e:"this instance";!o&&r&&t?n.log(C()+"[OVERRIDE] LOGGING ENABLED - $log enabled for "+i):o&&r&&!t&&n.log(C()+"[OVERRIDE] LOGGING DISABLED - $log disabled for "+i)},o=function(n){var r={};return angular.isArray(n)&&(r={getInstance:angular.noop},angular.forEach(n,function(n){r[n]=angular.noop})),r},i=function(n,r,t,e){var i={},u=o(r);return angular.forEach(g,function(r){var o;if(angular.isDefined(e)){var a=[];angular.copy(e,a),a.unshift(n[r]),G&&f&&(a[5]=j(a[5])?a[5]:L[r]),o=t.apply(null,a)}else o=n[r];i[r]=angular.isUndefined(u[r])?angular.noop:o}),i},u=function(o){var u=function(n,r,e,o,i,u){var a=function(){var a=o?t(g,e):g;if(a){var l=Array.prototype.slice.call(arguments);d.logFilters.length>0&&(l=m(l));var c=C(r);if(M(i,l)){var f=S.apply(null,l);f="string"===b(f)?[f]:f,l=f}"string"===b(u)&&I(l)?l=A(l[0],u,c):l.unshift(c),n&&n.apply(null,l)}};return a.logs=[],a},a=i(o,v),l=function(t,o,l,c){x(t)?(o=t,t=null):t="string"===b(t)?y(t):null;var f=n(o);return o=r(o),e(a,f,o,t,g),i(a,v,u,[t,o,f,l,c])},g=!1,c=!1;return angular.extend(o,i(o,v,u,[null,!1,!1,!1,null])),o.getInstance=l,o.enableLog=function(n,r){g=n,c=r},o.logEnabled=function(){return g&&!c},o},a=function(n){return i(n,v)};this.enhanceLogger=u,this.exposeSafeLog=a},t=new r;return t.enhanceLogger(n),n.enableLog(e,o),n.logEnabled()&&n.log("CONFIG: LOGGING ENABLED GLOBALLY"),t.exposeSafeLog(n)}]);var $=function(n,r){e=x(n)?n:!1,o=x(r)?r:!1},N=function(n){angular.isArray(n)&&(v=n)},P=function(n){angular.isFunction(n)&&(a=n,i=!0)},R=function(n){f=!(x(n)&&n)},B=function(n,r){"string"===b(n)&&L.hasOwnProperty(n)&&j(r)&&(L[n]=r)},U=function(n){"object"===b(n)&&angular.forEach(n,function(n,r){B(r,n)})},V=function(n){angular.isUndefined(n)?u=!0:x(n)&&(u=n)},k=function(n){"object"===b(n)&&"array"===b(n.logFilters)&&n.logFilters.length>0&&(angular.forEach(n.logFilters,function(n){"string"===b(n)&&0>d.logFilters.indexOf(n)&&d.logFilters.push(n)}),d.filterString="string"!==b(n.filterString)?h:n.filterString)};this.$get=function(){return{name:"Log Unobtrusive Extension",version:"0.0.10",enableLogging:$,restrictLogMethods:N,overrideLogPrefix:P,disableDefaultColors:R,setLogMethodColor:B,overrideLogMethodColors:U,useDefaultLogPrefix:V,configureLogFilters:k}},this.enableLogging=$,this.overrideLogPrefix=P,this.restrictLogMethods=N,this.disableDefaultColors=R,this.setLogMethodColor=B,this.overrideLogMethodColors=U,this.useDefaultLogPrefix=V,this.configureLogFilters=k}]);